<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout | 2LGA Studio</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" rel="stylesheet">

<style>

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Inter', sans-serif;
}

body{
background:#ffffff;
color:#111;
padding:100px 8%;
}

h2{
font-size:2.5rem;
margin-bottom:40px;
}

h2 span{
color:#d60000;
}

/* Contenedor */

.checkout-container{
max-width:800px;
border:1px solid #eee;
padding:40px;
}

/* Secciones */

.section{
margin-bottom:35px;
}

.section h3{
margin-bottom:15px;
font-weight:500;
}

/* Email */

input[type="email"]{
width:100%;
padding:14px;
border:1px solid #ccc;
font-size:1rem;
margin-top:10px;
}

/* Botón */

button{
margin-top:20px;
padding:15px 40px;
border:2px solid #d60000;
background:transparent;
color:#d60000;
cursor:pointer;
transition:0.3s ease;
font-weight:500;
}

button:hover{
background:#d60000;
color:white;
}

/* Precio */

.price{
font-size:1.3rem;
font-weight:600;
color:#d60000;
margin-top:15px;
}

</style>
</head>
<body>

<h2>Project <span>Checkout</span></h2>

<div class="checkout-container">

<!-- RESUMEN -->
<div class="section">
<h3>Project Summary</h3>
<div id="summary"></div>
<div class="price" id="totalPrice"></div>
</div>

<!-- EMAIL -->
<div class="section">
<h3>Contact Email</h3>
<input type="email" id="emailInput" placeholder="Enter your email..." required>
</div>

<!-- BOTÓN -->
<button onclick="processCheckout()">Proceed to Payment</button>

</div>

<script>

/* ================================
CONFIGURACIÓN DE PRECIOS
================================ */

const PRICING = {
"Branding": 3000,
"Web Experience": 4000,
"3D": 5000,
"Animation": 2000
};

/* ================================
CALCULAR PRECIO DINÁMICAMENTE
================================ */

function calculatePrice(){

const selections = JSON.parse(localStorage.getItem("projectSelections")) || [];
const summaryBox = document.getElementById("summary");
const priceBox = document.getElementById("totalPrice");

summaryBox.innerHTML = "";

let total = 0;

/* Generar resumen + sumar precios */

if(selections.length > 0){

selections.forEach(item => {

const price = PRICING[item] || 1000;
total += price;

const p = document.createElement("p");
p.innerText = "• " + item + " — $" + price + " USD";
summaryBox.appendChild(p);

});

} else {
summaryBox.innerText = "No project data found.";
}

/* Mostrar total */

priceBox.innerText = "Estimated Total: $" + total + " USD";

/* Guardar total */

localStorage.setItem("projectTotal", total);

}

/* Ejecutar al cargar */

calculatePrice();

/* Escuchar cambios en storage */

window.addEventListener("storage", calculatePrice);

/* ================================
CHECKOUT
================================ */

function processCheckout(){

const email = document.getElementById("emailInput").value;
const total = localStorage.getItem("projectTotal");

if(email.trim() === ""){
alert("Please enter your email.");
return;
}

if(!email.includes("@")){
alert("Enter a valid email.");
return;
}

/* Guardar email */

localStorage.setItem("clientEmail", email);

/* Aquí después conectamos Stripe */

alert("Ready for payment.\nEmail saved.\nTotal: $" + total + " USD");

console.log("Email:", email);
console.log("Total:", total);

}

</script>

</body>
</html>
